= form_for @post do |f|
  = f.hidden_field :project_id, ng_model: 'project_id', splatnit: true

  .container{ng_controller: 'PostLookupCtrl'}
    .row
      .col-sm-12
        - if @post.errors.any?
          %form-errors{data: {errors: @post.errors.full_messages.to_json}}
    .row
      .col-sm-12
        %fieldset.form-group{ng_class: "{'has-warning' : !!asin_warning}"}
          = f.label :slug, 'URL'
          %button.label.label-pill.label-info.pull-xs-right{ng_if: '!!slug', ng_click: 'loadItemDetails($event)'}
            Fetch Post
          = f.text_field :slug, class: 'form-control', autofocus: true, ng_model: 'slug', splatnit: true
          %small.text-muted
            You can paste a steemit URL here.
            %span{ng_if: '!!slug_warning'}
              .alert.alert-warning {{slug_warning}}
    %fieldset.form-group
      - if !!@post.project
        - if @post.persisted?
          = f.submit 'Save', class: 'btn btn-primary'
        - else
          = f.submit 'Create', class: 'btn btn-primary'
        = link_to 'Cancel', project_posts_path(@post.project_id), class: 'btn btn-info'
      - else
        = f.submit class: 'btn btn-primary'
        = link_to 'Cancel', posts_path, class: 'btn btn-info'
